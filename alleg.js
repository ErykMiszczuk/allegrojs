function install_allegro(){Date.now||(Date.now=function(){return(new Date).getTime()});log("Allegro installed!")}function allegro_init(){install_allegro()}function allegro_init_all(a,b,c,d,e){install_allegro();set_gfx_mode(a,b,c);install_mouse(d);install_keyboard(e);install_sound()}function END_OF_MAIN(){window.addEventListener("load",main)}
var mouse_b=0,mouse_pressed=0,mouse_released=0,mouse_x=-1,mouse_y=-1,mouse_z=-1,mouse_mx=0,mouse_my=0,mouse_mz=0,_mouse_installed=!1,_last_mouse_x=-1,_last_mouse_y=-1,_last_mouse_z=-1,_menu=!1;
function install_mouse(a){if(!canvas)return _error("You must call set_gfx_mode before install_mouse"),-1;if(_mouse_installed)return _allog("Mouse already installed"),-1;canvas.canvas.addEventListener("mouseup",_mouseup);canvas.canvas.addEventListener("mousedown",_mousedown);canvas.canvas.addEventListener("mousemove",_mousemove);canvas.canvas.addEventListener("wheel",_mousewheel);a?_menu_supress=!0:(canvas.canvas.addEventListener("contextmenu",_mousemenu),_menu_supress=!1);_mouse_installed=!0;log("Mouse installed!");
return 0}function remove_mouse(){if(!_mouse_installed)return _error("You must call install_mouse before remove_mouse"),-1;canvas.canvas.removeEventListener("mouseup",_mouseup);canvas.canvas.removeEventListener("mousedown",_mousedown);canvas.canvas.removeEventListener("mousemove",_mousemove);canvas.canvas.removeEventListener("wheel",_mousewheel);_menu_supress&&canvas.canvas.removeEventListener("contextmenu",_mousemenu);_mouse_installed=!1;log("Mouse removed!");return 0}
function show_mouse(){if(!_mouse_installed)return _error("You must call install_mouse before show_mouse"),-1;canvas.canvas.style.cursor="auto";return 0}function hide_mouse(){if(!_mouse_installed)return _error("You must call install_mouse before hide_mouse"),-1;canvas.canvas.style.cursor="none";return 0}function _mousemenu(a){a.preventDefault()}function _mouseup(a){mouse_b&=~(1<<a.which-1);mouse_released|=1<<a.which-1;a.preventDefault()}
function _mousedown(a){mouse_b|=1<<a.which-1;mouse_pressed|=1<<a.which-1;a.preventDefault()}function _mousemove(a){mouse_x=a.offsetX;mouse_y=a.offsetY;a.preventDefault()}function _mousewheel(a){mouse_z+=a.deltaY;a.preventDefault()}var _downloadables=[],_installed_timers=[];function _timer_lookup(a){for(var b=0;b<_installed_timers.length;b++)if(_installed_timers[b].timer==a)return _installed_timers[b];return-1}function SECS_TO_TIMER(a){return 1E3*a}function MSEC_TO_TIMER(a){return a}
function BPS_TO_TIMER(a){return 1E3/a}function BPM_TO_TIMER(a){return 6E4/a}function install_timer(){}function time(){return Date.now()}function install_int(a,b){return install_int_ex(a,MSEC_TO_TIMER(b))}function install_int_ex(a,b){var c=window.setInterval(a,b);_installed_timers.push({timer:a,id:c});log("Added insterrupt #"+c+" at "+b+"msec isntervals!")}var _loopproc;
function _uberloop(){_mouse_installed&&(mouse_mx=mouse_x-_last_mouse_x,mouse_my=mouse_y-_last_mouse_y,mouse_mz=mouse_z-_last_mouse_z);_loopproc();if(_keyboard_installed)for(var a=0;128>a;a++)pressed[a]=!1,released[a]=!1;_mouse_installed&&(mouse_mz=mosue_my=mouse_mx=mouse_released=mouse_pressed=0,_last_mouse_x=mouse_x,_last_mouse_y=mouse_y,_last_mouse_z=mouse_z)}function loop(a,b){_loopproc=a;window.setInterval(_uberloop,b);log("Game loop initialised!")}var _loader_init_time,_ready_proc,_bar_proc;
function _progress_check(){for(var a=0,b=0,c=0;c<_downloadables.length;c++)a++,"snd"==_downloadables[c].type&&_downloadables[c].element.readyState>=_downloadables[c].element.HAVE_FUTURE_DATA&&(_downloadables[c].ready=!0),_downloadables[c].ready&&b++;_bar_proc&&_bar_proc(a/b);b<a?window.setTimeout(_progress_check,100):(log("Loading complete! Took "+((time()-_loader_init_time)/1E3).toFixed(1)+" seconds!"),_ready_proc())}
function loading_bar(a){rectfill(canvas,5,SCREEN_H-55,SCREEN_W-10,50,makecol(0,0,0));rectfill(canvas,10,SCREEN_H-50,SCREEN_W-20,40,makecol(255,255,255));rectfill(canvas,15,SCREEN_H-45,SCREEN_W-30,30,makecol(0,0,0));rectfill(canvas,20,SCREEN_H-40,scaleclamp(a,0,1,0,SCREEN_W-40),20,makecol(255,255,255))}function ready(a,b){_loader_init_time=time();_ready_proc=a;log("Loader initialised!");_bar_proc=b?b:loading_bar;window.setTimeout(_progress_check,100)}
function remove_int(a){for(a=0;a<_installed_timers.length;a++)if(_installed_timers[a].timer==_installed_timers){log("Removing interrupt "+_installed_timers[a].id+"!");window.clearInterval(_installed_timers[a].id);_installed_timers.splice(a,1);break}}function remove_all_ints(){for(var a=0;a<_installed_timers.length;a++)window.clearInterval(_installed_timers[a].id);_installed_timers=[];log("Removed all interrupts!")}
var KEY_A=65,KEY_B=66,KEY_C=67,KEY_D=68,KEY_E=69,KEY_F=70,KEY_G=71,KEY_H=72,KEY_I=73,KEY_J=74,KEY_K=75,KEY_L=76,KEY_M=77,KEY_N=78,KEY_O=79,KEY_P=80,KEY_Q=81,KEY_R=82,KEY_S=83,KEY_T=84,KEY_U=85,KEY_V=86,KEY_W=87,KEY_X=88,KEY_Y=89,KEY_Z=90,KEY_0=48,KEY_1=49,KEY_2=50,KEY_3=51,KEY_4=52,KEY_5=53,KEY_6=54,KEY_7=55,KEY_8=56,KEY_9=57,KEY_0_PAD=96,KEY_1_PAD=97,KEY_2_PAD=98,KEY_3_PAD=99,KEY_4_PAD=100,KEY_5_PAD=101,KEY_6_PAD=102,KEY_7_PAD=103,KEY_8_PAD=104,KEY_9_PAD=105,KEY_F1=112,KEY_F2=113,KEY_F3=114,KEY_F4=
115,KEY_F5=116,KEY_F6=117,KEY_F7=118,KEY_F8=119,KEY_F9=120,KEY_F10=121,KEY_F11=122,KEY_F12=123,KEY_ESC=27,KEY_TILDE=192,KEY_MINUS=189,KEY_EQUALS=187,KEY_BACKSPACE=8,KEY_TAB=9,KEY_OPENBRACE=219,KEY_CLOSEBRACE=221,KEY_ENTER=13,KEY_COLON=186,KEY_QUOTE=222,KEY_BACKSLASH=220,KEY_COMMA=188,KEY_STOP=190,KEY_SLASH=191,KEY_SPACE=32,KEY_INSERT=45,KEY_DEL=46,KEY_HOME=36,KEY_END=35,KEY_PGUP=33,KEY_PGDN=34,KEY_LEFT=37,KEY_RIGHT=39,KEY_UP=38,KEY_DOWN=40,KEY_SLASH_PAD=111,KEY_ASTERISK=106,KEY_MINUS_PAD=109,KEY_PLUS_PAD=
107,KEY_ENTER_PAD=13,KEY_PRTSCR=44,KEY_PAUSE=19,KEY_EQUALS_PAD=12,KEY_LSHIFT=16,KEY_RSHIFT=16,KEY_LCONTROL=17,KEY_RCONTROL=17,KEY_ALT=18,KEY_ALTGR=18,KEY_LWIN=91,KEY_RWIN=92,KEY_MENU=93,KEY_SCRLOCK=157,KEY_NUMLOCK=144,KEY_CAPSLOCK=20,key=[],pressed=[],released=[],_keyboard_installed=!1,_default_enabled_keys=[KEY_F1,KEY_F2,KEY_F3,KEY_F4,KEY_F5,KEY_F6,KEY_F7,KEY_F8,KEY_F9,KEY_F10,KEY_F11,KEY_F12],_enabled_keys=[];
function install_keyboard(a){if(_keyboard_installed)return _allog("Keyboard already installed"),-1;_enabled_keys=a?a:_default_enabled_keys;for(a=0;128>a;a++)key[a]=!1,pressed[a]=!1,released[a]=!1;document.addEventListener("keyup",_keyup);document.addEventListener("keydown",_keydown);_keyboard_installed=!0;log("Keyboard installed!");return 0}
function remove_keyboard(){if(!_keyboard_installed)return _allog("Keyboard not installed"),-1;document.removeEventListener("keyup",_keyup);document.removeEventListener("keydown",_keydown);_keyboard_installed=!1;log("Keyboard removed!");return 0}function _keydown(a){key[a.keyCode]||(pressed[a.keyCode]=!0);key[a.keyCode]=!0;-1==_enabled_keys.indexOf(a.keyCode)&&a.preventDefault()}function _keyup(a){key[a.keyCode]=!1;released[a.keyCode]=!0;-1==_enabled_keys.indexOf(a.keyCode)&&a.preventDefault()}
function BITMAP_OBJECT(a,b,c,d,e,f){}function create_bitmap(a,b){log("Creating bitmap at "+a+" x "+b+"!");var c=document.createElement("canvas");c.width=a;c.height=b;var d=c.getContext("2d");return{w:a,h:b,canvas:c,context:d,ready:!0,type:"bmp"}}
function load_bitmap(a){log("Loading bitmap "+a+"...");var b=new Image;b.src=a;time();var c=document.createElement("canvas"),d=c.getContext("2d"),e={canvas:c,context:d,w:-1,h:-1,ready:!1,type:"bmp"};_downloadables.push(e);b.onload=function(){log("Bitmap "+a+" loaded, size: "+b.width+" x "+b.height+"!");e.canvas.width=b.width;e.canvas.height=b.height;e.context.drawImage(b,0,0);e.w=b.width;e.h=b.height;e.ready=!0};return e}function load_bmp(a){return load_bitmap(a)}
var canvas,_gfx_installed=!1,SCREEN_W=0,SCREEN_H=0,font;function set_gfx_mode(a,b,c){var d=document.getElementById(a);if(!d)return _error("Can't find canvas with id "+a),-1;d.width=b;d.height=c;a=d.getContext("2d");SCREEN_W=b;SCREEN_H=c;canvas={w:b,h:c,canvas:d,context:a,ready:!0};font=load_base64_font(_cartoon_woff);_gfx_installed=!0;return 0}var PI=3.14159265,PI2=6.2831853,PI_2=1.570796325,PI_3=3.14159265/3,PI_4=.7853981625;function RAD(a){return-a*PI/180}function DEG(a){return 180*-a/PI}
function _fillstyle(a,b){a.context.fillStyle="rgba("+getr(b)+","+getg(b)+","+getb(b)+","+getaf(b)+")"}function _strokestyle(a,b,c){c||(c=1);a.context.lineWidth=c;a.context.strokeStyle="rgba("+getr(b)+","+getg(b)+","+getb(b)+","+getaf(b)+")"}function makecol(a,b,c,d){return("undefined"!==typeof d?d:255)<<24|(a&255)<<16|(b&255)<<8|c&255}function makecolf(a,b,c,d){return makecol(255*a,255*b,255*c,255*("undefined"!==typeof d?d:1))}function getr(a){return a>>16&255}function getg(a){return a>>8&255}
function getb(a){return a&255}function geta(a){return a>>>24}function getrf(a){return a>>16&1}function getgf(a){return a>>8&1}function getbf(a){return a&1}function getaf(a){return(a>>>24)/255}function getpixel(a,b,c){a=a.context.getImageData(b,c,1,1).data;return a[3]<<24|(a[0]&255)<<16|(a[1]&255)<<8|a[2]&255}function putpixel(a,b,c,d){_fillstyle(a,d);a.context.fillRect(b,c,1,1)}function clear_bitmap(a){a.context.clearRect(0,0,a.w,a.h)}
function clear_to_color(a,b){a.context.clearRect(0,0,a.w,a.h);_fillstyle(a,b);a.context.fillRect(0,0,a.w,a.h)}function line(a,b,c,d,e,f,g){_strokestyle(a,f,g);a.context.beginPath();a.context.moveTo(b,c);a.context.lineTo(d,e);a.context.stroke()}function vline(a,b,c,d,e,f){f="undefined"!==typeof f?f:1;_fillstyle(a,e);a.context.fillRect(b-f/2,c,f,d-c)}function hline(a,b,c,d,e,f){f="undefined"!==typeof f?f:1;_fillstyle(a,e);a.context.fillRect(b,c-f/2,d-b,f)}
function triangle(a,b,c,d,e,f,g,h,k){_strokestyle(a,h,k);a.context.beginPath();a.context.moveTo(b,c);a.context.lineTo(d,e);a.context.lineTo(f,g);a.context.closePath();a.context.stroke()}function trianglefill(a,b,c,d,e,f,g,h){_fillstyle(a,h);a.context.beginPath();a.context.moveTo(b,c);a.context.lineTo(d,e);a.context.lineTo(f,g);a.context.closePath();a.context.fill()}
function polygon(a,b,c,d,e){_strokestyle(a,d,e);a.context.beginPath();for(d=0;d<b;d++)d?a.context.lineTo(c[2*d],c[2*d+1]):a.context.moveTo(c[2*d],c[2*d+1]);a.context.closePath();a.context.stroke()}function polygonfill(a,b,c,d){_fillstyle(a,d);a.context.beginPath();for(d=0;d<b;d++)d?a.context.lineTo(c[2*d],c[2*d+1]):a.context.moveTo(c[2*d],c[2*d+1]);a.context.closePath();a.context.fill()}function rect(a,b,c,d,e,f,g){_strokestyle(a,f,g);a.context.strokeRect(b,c,d,e)}
function rectfill(a,b,c,d,e,f){_fillstyle(a,f);a.context.fillRect(b,c,d,e)}function circle(a,b,c,d,e,f){_strokestyle(a,e,f);a.context.beginPath();a.context.arc(b,c,d,0,PI2);a.context.stroke()}function circlefill(a,b,c,d,e){_fillstyle(a,e);a.context.beginPath();a.context.arc(b,c,d,0,PI2);a.context.fill()}function arc(a,b,c,d,e,f,g,h){_strokestyle(a,g,h);a.context.beginPath();a.context.arc(b,c,f,RAD(d),RAD(e));a.context.stroke()}
function arcfill(a,b,c,d,e,f,g){_fillstyle(a,g);a.context.beginPath();a.context.arc(b,c,f,RAD(d),RAD(e));a.context.fill()}function draw_sprite(a,b,c,d){a.context.drawImage(b.canvas,c-b.w/2,d-b.h/2)}function scaled_sprite(a,b,c,d,e,f){f="undefined"!==typeof f?f:e;var g=e*b.w/2,h=f*b.h/2;a.context.save();a.context.translate(c-g,d-h);a.context.scale(e,f);a.context.drawImage(b.canvas,0,0);a.context.restore()}
function rotate_sprite(a,b,c,d,e){var f=b.w/2,g=b.h/2;a.context.save();a.context.translate(c,d);a.context.rotate(RAD(e));a.context.translate(-f,-g);a.context.drawImage(b.canvas,0,0);a.context.restore()}function pivot_sprite(a,b,c,d,e,f,g){a.context.save();a.context.translate(c,d);a.context.rotate(RAD(g));a.context.translate(-e,-f);a.context.drawImage(b.canvas,0,0);a.context.restore()}
function rotate_scaled_sprite(a,b,c,d,e,f,g){g="undefined"!==typeof g?g:f;var h=f*b.w/2,k=g*b.h/2;a.context.save();a.context.translate(c,d);a.context.rotate(RAD(e));a.context.translate(-h,-k);a.context.scale(f,g);a.context.drawImage(b.canvas,0,0);a.context.restore()}
function pivot_scaled_sprite(a,b,c,d,e,f,g,h,k){k="undefined"!==typeof k?k:h;e*=h;f*=k;a.context.save();a.context.translate(c,d);a.context.rotate(RAD(g));a.context.translate(-e,-f);a.context.scale(h,k);a.context.drawImage(b.canvas,0,0);a.context.restore()}function blit(a,b,c,d,e,f,g,h){b.context.drawImage(a.canvas,c,d,g,h,e,f,g,h)}function simple_blit(a,b,c,d){b.context.drawImage(a.canvas,c,d)}function stretch_blit(a,b,c,d,e,f,g,h,k,l){b.context.drawImage(a.canvas,c,d,e,f,g,h,k,l)}
var _cartoon_woff="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",
_num_fonts=0;function FONT_OBJECT(a,b,c,d){}function load_base64_font(a){var b=document.createElement("style"),c="font"+_num_fonts++;b.id=c;b.type="text/css";document.head.appendChild(b);b.textContent="@font-face { font-family: "+c+"; src:url('data:application/font-woff;base64,"+a+"') format('woff');}";return{element:b,file:"",name:c,type:"fnt"}}
function load_font(a){var b=document.createElement("style"),c="font"+_num_fonts++;b.id=c;b.type="text/css";document.head.appendChild(b);b.textContent="@font-face { font-family: "+c+"; src:url('"+a+"');}";return{element:b,file:a,name:c,type:"fnt"}}function create_font(a){return{element:null,file:"",name:a,type:"fnt"}}
function textout(a,b,c,d,e,f,g,h,k){a.context.font=f.toFixed()+"px "+b.name;a.context.textAlign="left";_fillstyle(a,g);a.context.fillText(c,d,e);h&&(_strokestyle(a,h,k),a.context.strokeText(c,d,e))}function textout_centre(a,b,c,d,e,f,g,h,k){a.context.font=f.toFixed()+"px "+b.name;a.context.textAlign="center";_fillstyle(a,g);a.context.fillText(c,d,e);h&&(_strokestyle(a,h,k),a.context.strokeText(c,d,e))}
function textout_right(a,b,c,d,e,f,g,h,k){a.context.font=f.toFixed()+"px "+b.name;a.context.textAlign="right";_fillstyle(a,g);a.context.fillText(c,d,e);h&&(_strokestyle(a,h,k),a.context.strokeText(c,d,e))}var _volume=1,_samples=[];function SAMPLE_OBJECT(a,b,c,d,e){}function install_sound(){}function set_volume(a){_volume=a;for(a=0;a<_samples.length;a++)_samples[a].element.volume=_samples[a].volume*_volume}function get_volume(){return _volume}
function load_sample(a){var b=document.createElement("audio");b.src=a;var c={element:b,file:a,volume:1,ready:!1,type:"snd"};_downloadables.push(c);_samples.push(c);log("Loading sample "+a+"...");b.onloadeddata=function(){c.ready||(c.ready=!0,log("Sample "+a+" loaded!"))};return c}function destroy_sample(a){}function play_sample(a,b,c,d){b="undefined"!==typeof b?b:1;adjust_sample(a,b,"undefined"!==typeof c?b:1,"undefined"!==typeof d?d:!1);a.element.currentTime=0;a.element.play()}
function adjust_sample(a,b,c,d){a.volume=b;a.element.volume=a.volume*_volume;a.element.loop=d;a.element.playbackRate=c}function stop_sample(a){a.element.pause();a.element.currentTime=0}function pause_sample(a){a.element.pause()}function rand(){return Math.floor(65536*Math.random())}function rand32(){return rand()|rand()<<16}function frand(){return Math.random()}function abs(a){return 0>a?-a:a}function length(a,b){return Math.sqrt(a*a-b*b)}
function distance(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))}function distance2(a,b,c,d){return(c-a)*(c-a)+(d-b)*(d-b)}function linedist(a,b,c,d,e,f){c-=a;d-=b;var g=((e-a)*c+(f-b)*d)/(c*c+d*d);1<g?g=1:0>g&&(g=0);a=a+g*c-e;b=b+g*d-f;return Math.sqrt(a*a+b*b)}function lerp(a,b,c){return a+(b-a)*c}function dot(a,b,c,d){return a*c+b*d}function sgn(a){return 0>a?-1:0<a?1:0}function angle(a,b,c,d){a=DEG(Math.atan2(d-b,c-a));return 0>a?a+360:a}
function anglediff(a,b){var c;c=(b-a)/360;c=360*(c-floor(c));180<c&&(c-=360);return c}function clamp(a,b,c){return c>b?a<b?b:a>c?c:a:a<c?c:a>b?b:a}function scale(a,b,c,d,e){return d+(a-b)/(c-b)*(e-d)}function scaleclamp(a,b,c,d,e){a=d+(a-b)/(c-b)*(e-d);if(e>d)return a=a<e?a:e,a>d?a:d;a=a<d?a:d;return a>e?a:e}var _debug_enabled=!1,_debug_element,ALLEGRO_CONSOLE=!1;function _error(a){log("[ERROR] "+a);alert(a)}
function enable_debug(a){(_debug_element=document.getElementById(a))&&(_debug_enabled=!0)}function log(a){ALLEGRO_CONSOLE&&console&&console.log(a);_debug_enabled&&(_debug_element.innerHTML=_debug_element.innerHTML+a+"<br/>")}function wipe_log(){_debug_enabled&&(_debug_element.innerHTML="")};
